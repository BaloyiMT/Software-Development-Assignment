<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Surveys</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="{{ url_for('static', filename='style.css') }}" rel="stylesheet">
</head>
<body>
    <nav class="nav-bar mt-5">
        <div class="nav-container">
            <div class="nav-title"><p><b>_Surveys</b></p></div>
            <ul class="nav-links">
                <li><a href="{{ url_for('survey') }}" class="active"><b>FILL OUT SURVEY</b></a></li>
                <li><a href="{{ url_for('results') }}"><b>VIEW SURVEY RESULTS</b></a></li>
            </ul>
        </div>
    </nav>

    <form method="POST" action="/submit" onsubmit="return validateForm()">
        <div class="info">
            <p class="personal">Personal Details:</p>
            <div class="container">
                <div class="mb-3">
                    <label for="name" class="form-label">Full Names</label>
                    <input type="text" class="form-control" id="name" name="name" required>
                </div>
                <div class="mb-3">
                    <label for="email" class="form-label">Email Address</label>
                    <input type="email" class="form-control" id="email" name="email" placeholder="name@example.com" required>
                </div>
                <div class="mb-3">
                    <label for="dob" class="form-label">Date of Birth</label>
                    <input type="date" class="form-control" id="dob" name="dob" required>
                </div>
                <div class="mb-3">
                    <label for="contact-number" class="form-label">Contact Number</label>
                    <input type="tel" class="form-control" id="contact-number" name="contact-number" required>
                </div>
            </div>
        </div>

        <div class="food">
            <p class="favorite">What is your favorite food?</p>
            <div class="form-check">
                <div><input class="form-check-input" type="checkbox" name="food" value="Pizza"> Pizza</div>
                <div><input class="form-check-input" type="checkbox" name="food" value="Pasta"> Pasta</div>
                <div><input class="form-check-input" type="checkbox" name="food" value="Pap and Wors"> Pap and Wors</div>
                <div><input class="form-check-input" type="checkbox" name="food" value="Other"> Other</div>
            </div>
        </div>

        <p>Please rate the level of agreement on a scale from 1 to 5, with 1 being "strongly agree" and 5 being "strongly disagree"</p>
        <table>
            <thead>
                <tr>
                    <th></th>
                    <th>Strongly Agree</th>
                    <th>Agree</th>
                    <th>Neutral</th>
                    <th>Disagree</th>
                    <th>Strongly Disagree</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>I like to watch movies</td>
                    <td><input type="radio" name="movies" value="1" required></td>
                    <td><input type="radio" name="movies" value="2" required></td>
                    <td><input type="radio" name="movies" value="3" required></td>
                    <td><input type="radio" name="movies" value="4" required></td>
                    <td><input type="radio" name="movies" value="5" required></td>
                </tr>
                <tr>
                    <td>I like to listen to radio</td>
                    <td><input type="radio" name="radio" value="1" required></td>
                    <td><input type="radio" name="radio" value="2" required></td>
                    <td><input type="radio" name="radio" value="3" required></td>
                    <td><input type="radio" name="radio" value="4" required></td>
                    <td><input type="radio" name="radio" value="5" required></td>
                </tr>
                <tr>
                    <td>I like to eat out</td>
                    <td><input type="radio" name="eatout" value="1" required></td>
                    <td><input type="radio" name="eatout" value="2" required></td>
                    <td><input type="radio" name="eatout" value="3" required></td>
                    <td><input type="radio" name="eatout" value="4" required></td>
                    <td><input type="radio" name="eatout" value="5" required></td>
                </tr>
                <tr>
                    <td>I like to watch TV</td>
                    <td><input type="radio" name="watchtv" value="1" required></td>
                    <td><input type="radio" name="watchtv" value="2" required></td>
                    <td><input type="radio" name="watchtv" value="3" required></td>
                    <td><input type="radio" name="watchtv" value="4" required></td>
                    <td><input type="radio" name="watchtv" value="5" required></td>
                </tr>
            </tbody>
        </table>

        <button type="submit" class="btn">SUBMIT</button>
    </form>

    <script>
        function validateForm() {
            let foodChoices = document.querySelectorAll('input[name="food"]:checked');
            if (foodChoices.length === 0) {
                alert("Please select at least one favourite food option.");
                return false;
            }
            return true;
        }

        function validateForm() {
            // Existing food validation
            let foodChoices = document.querySelectorAll('input[name="food"]:checked');
            if (foodChoices.length === 0) {
                alert("Please select at least one favourite food option.");
                return false;
            }
            // Age validation
            let dobInput = document.getElementById("dob").value;
            if (!dobInput) {
                alert("Please enter your Date of Birth.");
                return false;
            }
            let today = new Date();
            let dob = new Date(dobInput);
            let age = today.getFullYear() - dob.getFullYear();
            let m = today.getMonth() - dob.getMonth();
            if (m < 0 || (m === 0 && today.getDate() < dob.getDate())) {
                age--;
            }
            if (age < 5 || age > 120) {
                alert("Age must be between 5 and 120 years.");
                return false;
            }
            return true;
        }
    </script>
</body>
</html>
